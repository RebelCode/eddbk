!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("bookingWizardComponents",[],t):"object"==typeof exports?exports.bookingWizardComponents=t():e.bookingWizardComponents=t()}(window,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);var n=function(){function e(t,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"month";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rangeCache=[],this.moment=t,this.differenceWith=i,this.isEqual=n,this.period=r}return e.prototype.getUncachedRange=function(e){var t=e.service,i=e.start,n=e.end,r=this._getFullPeriodRanges({service:t,start:i,end:n}),s=this.differenceWith(r,this.rangeCache,this.isEqual);if(s.length){var o=s[0],a=s.slice(-1)[0];return{service:t,start:o.start,end:a.end}}return null},e.prototype.remember=function(e){var t=e.service,i=e.start,n=e.end,r=this._getFullPeriodRanges({service:t,start:i,end:n}),s=this.differenceWith(r,this.rangeCache,this.isEqual);if(s)return this.rangeCache=[].concat(this.rangeCache,s),this.rangeCache},e.prototype.clear=function(){this.rangeCache=[]},e.prototype._getFullPeriodRanges=function(e){var t=this,i=e.service,n=e.start,r=e.end,s=this.moment.range(this.moment(n).startOf(this.period),this.moment(r).endOf(this.period));return Array.from(s.by(this.period)).map(function(e){return{service:i,start:e.startOf(t.period).format(),end:e.endOf(t.period).format()}})},e}();function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return s(t,e),t.prototype.getItems=function(){return this._getItems().slice()},t.prototype.hasItem=function(e){var t=null,i=this._getItems(),n=this._keyGetter(e);for(var r in i)if(this._keyGetter(i[r])===n){t=r;break}return null!==t},t.prototype._addItem=function(e,t){return(e=e.slice()).push(t),e},t.prototype._removeItem=function(e,t){var i=null,n=this._keyGetter(t);for(var r in e)if(this._keyGetter(e[r])==n){i=r;break}return null!==i&&e.splice(i,1),e},t}(function(){function e(t,i,n){if(o(this,e),!t)throw new Error("Getter must be provided");if(!i)throw new Error("Setter must be provided");if(!n)throw new Error("Key getter must be provided");this._itemsGetter=t,this._itemsSetter=i,this._keyGetter=n}return e.prototype._setItems=function(e){this._itemsSetter(e)},e.prototype._getItems=function(){return this._itemsGetter()},e.prototype.getItems=function(){return Object.assign({},this._getItems())},e.prototype.addItem=function(e){var t=this._getItems();t=this._addItem(t,e),this._setItems(t)},e.prototype.hasItem=function(e){return!!this._getItems()[this._keyGetter(e)]},e.prototype.removeItem=function(e){var t=this._getItems();t=this._removeItem(t,e),this._setItems(t)},e.prototype._addItem=function(e,t){e=Object.assign({},e);var i=this._keyGetter(t);if(e[i])throw new Error("Item with id "+i+" already exists");return e[i]=t,e},e.prototype._removeItem=function(e,t){return delete(e=Object.assign({},e))[this._keyGetter(t)],e},e.prototype._addItems=function(e,t){for(var i in t)this._addItem(e,t[i]);return e},e}()),u=(function(e){function t(i,n,s,a,u){if(o(this,t),!a)throw new Error("Collection limit must be provided");if(!u)throw new Error("Overflow mode for collection must be provided");var l=r(this,e.call(this,i,n,s));if(-1===l._getAllowedOverflowModes().indexOf(u))throw new Error("Wrong overflow mode is provided");return l._limit=a,l._overflowMode=u,l._checkOverflow(),l}s(t,e),t.prototype._getAllowedOverflowModes=function(){return["throw","prepend"]},t.prototype._addItem=function(e,t){if(e.length+1>this._limit)switch(this._overflowMode){case"throw":throw new Error("Limited collection can hold not more that "+this._limit+" items");case"prepend":return this._addItemToStart(e,t)}return(e=e.slice()).push(t),e},t.prototype._addItemToStart=function(e,t){return void 0!==this._lastAddedIndex&&this._lastAddedIndex!=e.length-1||(this._lastAddedIndex=-1),this._lastAddedIndex++,(e=e.slice())[this._lastAddedIndex]=t,e},t.prototype._checkOverflow=function(){var e=this._getItems();if(!(e.length<=this._limit))switch(this._overflowMode){case"throw":throw new Error("Limited collection can hold not more that "+this._limit+" items");case"prepend":this._setItems(e.slice(this._limit))}}}(a),function(e){function t(i,n,s,a){if(o(this,t),!a)throw new Error("Item allowed checker must be provided");var u=r(this,e.call(this,i,n,s));return u._itemAllowed=a,u}s(t,e),t.prototype.isAllowed=function(e){return this._itemAllowed(this.getItems(),e)}}(a),function(){function e(t,i){o(this,e),this._stateSetter=t,this._stateGetter=i}e.prototype._setState=function(e){this._stateSetter(!!e)},e.prototype._getState=function(){return this._stateGetter()},e.prototype.isOn=function(){return!!this._getState()},e.prototype.setState=function(e){this._setState(!!e)}}(),function(){function e(t,i){o(this,e),this.id=t,this.template=i}e.prototype.render=function(e){return this.template}}(),function(){function e(t,i,n){o(this,e),this.http=t,this.config=i,this.cache=n}return e.prototype.prepareParams=function(e){return e},e}()),l=(function(){function e(t){o(this,e),this._cache={},this.hashCode=t}e.prototype.remember=function(e,t){var i=this;return this.has(e)?new Promise(function(t){t(i.get(e))}):t().then(function(t){return i.set(e,t),t})},e.prototype.set=function(e,t){this._cache[this._getCacheKey(e)]=t},e.prototype.has=function(e){return!!this._cache[this._getCacheKey(e)]},e.prototype.get=function(e){return this._cache[this._getCacheKey(e)]},e.prototype._getCacheKey=function(e){var t={};return Object.keys(e).sort().map(function(i){t[i]=e[i]}),this.hashCode(JSON.stringify(t))}}(),function(){function e(){o(this,e),this.rules={}}return e.prototype.transform=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object.keys(this.rules),n=Array.isArray(i),r=0;for(i=n?i:i[Symbol.iterator]();;){var s;if(n){if(r>=i.length)break;s=i[r++]}else{if((r=i.next()).done)break;s=r.value}var o=s,a=this.rules[o];e.hasOwnProperty(o)&&(e=a(e=Object.assign({},e),t))}return e},e}());var c=function(e){function t(i,n,r,s,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,n,r));return u.sessions=[],u.rangeCache=s,u.sessionReadTransformer=o,u.moment=a,u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.fetch=function(e){var t=this,i=this.rangeCache.getUncachedRange(e);if(!i)return Promise.resolve(this._getSessions(e));var n=this.config.fetch;return this.http.request({method:n.method,url:n.endpoint,params:e}).then(function(n){t.rangeCache.remember(i);var r=n.data.items.map(function(e){return t.sessionReadTransformer.transform(e)});return t._storeSessions(r),t._getSessions(e)})},t.prototype._getSessions=function(e){var t=this,i=e.service,n=e.start,r=e.end;n=this.moment(n).unix(),r=this.moment(r).unix();var s=this.moment().unix();return n=s>n?s:n,this.sessions.filter(function(e){return e.service===i&&(e.startUnix<r||e.endUnix>n)&&e.startUnix>n}).map(function(e){return t._cleanSessionQueryFields(e)})},t.prototype._storeSessions=function(e){var t=this;this.sessions=[].concat(this.sessions,e.map(function(e){return t._addSessionQueryFields(e)}))},t.prototype.clearCache=function(){this.sessions=[],this.rangeCache.clear()},t.prototype._addSessionQueryFields=function(e){return(e=Object.assign({},e)).endUnix=this.moment(e.end).unix(),e},t.prototype._cleanSessionQueryFields=function(e){return delete(e=Object.assign({},e)).endUnix,e},t}(u);function f(e,t,i,n){return{template:"#service-session-selector-template",mixins:[e,t],inject:{"session-time-picker":"session-time-picker","session-date-picker":"session-date-picker","date-navigator":"date-navigator",sessionReadTransformer:"sessionReadTransformer"},data:function(){return{selectedDay:null,sessions:[],isSessionsLoading:!1,isEditModeAvailable:!1,isEditing:!1,oldValue:null,preloadedSession:null,prevAvailableDay:null,nextAvailableDay:null,selectedDaySessions:[],openedOnDate:this.createLocalDatetime().toDate(),isMounted:!1}},mounted:function(){var e=this;this.$nextTick(function(){e.isMounted=!0})},watch:{service:function(){this.filter.duration=null,this.filter.staffMember=null,this.$nextTick(this._setCleanStateValues)},selectedDaySessions:function(e){this.isDailyDuration&&1===e.length&&(this.session=e[0])}},props:{service:{default:null},timezone:{default:null},value:{}},computed:{session:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},selectedSessionLabel:function(){if(!this.value)return null;var e=this.createLocalDatetime(this.value.start);return e.format(n.sessionTime)+", "+e.format(n.dayFull)},isDailyDuration:function(){return!!this.filter.duration&&this.filter.duration>=86400}},created:function(){var e=this;this.value?(this.isEditModeAvailable=!0,this.initShowMode()):this.service&&this.$nextTick(function(){return e.loadSessions(e.openedOnDate)})},destroyed:function(){i.clearCache()},methods:{initShowMode:function(){var e=this;this.preloadedSession=this.sessionReadTransformer.transform(this.value),this.selectFilters(this.preloadedSession),this.sessions=[this.preloadedSession],this.$nextTick(function(){var t=e.createLocalDatetime(e.preloadedSession.start);e.selectedDay=e.createDateString(t),e.openedOnDate=e.createDateString(t)})},startEdit:function(){var e=this;this.isEditing=!0,this.oldValue=Object.assign({},this.value);var t=this.createLocalDatetime(this.preloadedSession.start);this.loadSessions(t).then(function(){e.selectedDay=null,e.$nextTick(function(){e.selectedDay=e.createDateString(t)})})},cancelEdit:function(){this.isSessionsLoading||(this.isEditing=!1,this.$emit("input",this.oldValue),this.$nextTick(this.initShowMode))},_addPreloadedSession:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i?e.find(function(e){return t._sessionsIsSame(e,i)})?e:(e.push(i),e):e},_sessionsIsSame:function(e,t){return e.service===t.service&&e.resource===t.resource&&e.start===t.start&&e.end===t.end},_setCleanStateValues:function(){var e=this;this.selectedDay=null,this.sessions=[],this.isEditModeAvailable=!1,this.isEditing=!1,this.$nextTick(function(){e.service&&e.loadSessions(e.openedOnDate)})},loadSessions:function(e){var t=this;return this.isSessionsLoading=!0,i.fetch(this._prepareSessionRequestParams(e)).then(function(e){t.sessions=t._addPreloadedSession(e,t.preloadedSession),t.isSessionsLoading=!1},function(e){console.error(e),t.isSessionsLoading=!1})},_prepareSessionRequestParams:function(e){var t=this._getDateRange(e),i=t.start,n=t.end;return{service:this.service.id,start:i,end:n}},_getDateRange:function(e){var t=this.createDatetime(),i=this.createSameLocalDatetime(e).startOf("month"),n=this.createSameLocalDatetime(e).endOf("month");return{start:(t.isAfter(i)?t:i).startOf("day").format(),end:n.endOf("day").format()}}},components:{"session-time-picker":"session-time-picker","session-date-picker":"session-date-picker","date-navigator":"date-navigator"}}}var h=function(e,t){return{template:"#session-time-picker-template",mixins:[e],props:{value:{},selectedDay:{default:null},sessions:{default:function(){return[]}},timezone:{default:null}},computed:{visibleSessions:function(){return this.sessions.sort(function(e,t){return e.startUnix-t.startUnix})}},methods:{sessionLabel:function(e){return this.createLocalDatetime(e.start).format(t.sessionTime)},isSelected:function(e){return this.value&&this.value.start===e.start&&this.value.end===e.end},select:function(e){this.$emit("input",e)}}}},d=function(e,t){return{template:"#session-date-picker-template",mixins:[e],inject:{datepicker:"datepicker"},props:{timezone:{default:null},selectedDay:{default:null},session:{default:null},prevAvailableDay:{default:null},nextAvailableDay:{default:null},isDailyDuration:{default:!1},loading:{default:null},availableSessions:{default:function(){return[]}},openedOnDate:{default:null},value:{}},computed:{selectedDayProxy:{get:function(){if(!this.selectedDay)return null;var e=this.selectedDay.split("-");return new Date(Number(e[0]),Number(e[1])-1,Number(e[2]))},set:function(e){this.$emit("update:selectedDay",this.createDateString(e))}},daysWithSessions:function(){var e={},t=this.availableSessions,i=Array.isArray(t),n=0;for(t=i?t:t[Symbol.iterator]();;){var r;if(i){if(n>=t.length)break;r=t[n++]}else{if((n=t.next()).done)break;r=n.value}var s=r,o=this._getSessionDays(s),a=Array.isArray(o),u=0;for(o=a?o:o[Symbol.iterator]();;){var l;if(a){if(u>=o.length)break;l=o[u++]}else{if((u=o.next()).done)break;l=u.value}var c=l,f=this._getDayKey(c);e[f]||(e[f]=[]),this.isDailyDuration?e[f]=[s]:e[f].push(s)}}return e},availableDays:function(){return Object.keys(this.daysWithSessions)},today:function(){var e=this.createLocalDatetime().startOf("day");return new Date(e.year(),e.month(),e.date())},sessionDays:function(){return this.isDailyDuration&&this.session?this._getSessionDays(this.session):[]}},watch:{selectedDay:function(e){var t=this.getSessionsForDay(e);this.$emit("input",t),this.$emit("update:nextAvailableDay",this.getNextAvailableDay(e)),this.$emit("update:prevAvailableDay",this.getPrevAvailableDay(e))},timezone:function(){var e=this;if(!this.loading){var t=this.selectedDay;this.$emit("update:session",null),this.$emit("update:selectedDay",null),this.daysWithSessions[t]&&this.daysWithSessions[t].length&&this.$nextTick(function(){e.$emit("update:selectedDay",t)})}},availableSessions:{deep:!0,handler:function(e,t){0===t.length&&this.selectedDay&&this.$emit("update:selectedDay",new Date(this.selectedDay))}}},methods:{onMonthChange:function(e){this.$emit("update:openedOnDate",e),this.$emit("changedMonth",e)},getSessionsForDay:function(e){var t=[];return e&&(t=this.daysWithSessions[e]||[]),t},getNextAvailableDay:function(e){var t=this.availableDays.indexOf(e),i=null;return this.availableDays.length-1!==t&&(i=this.availableDays[t+1]),i},getPrevAvailableDay:function(e){var t=this.availableDays.indexOf(e),i=null;return 0!==t&&(i=this.availableDays[t-1]),i},isDateDisabled:function(e){if(this.loading)return!0;var t=this.createDateString(e);return-1===Object.keys(this.daysWithSessions).indexOf(t)},_getSessionDays:function(e){for(var t=[],i=this.createLocalDatetime(e.start);i.isBefore(this.createLocalDatetime(e.end));i.add(1,"days"))t.push(i.toDate());return t},_getDayKey:function(e){return this.createLocalDatetime(e).format(t.dayKey)}},components:{datepicker:"datepicker"}}},p=function(e,t){return{template:"#date-navigator-template",mixins:[e],props:{selectedDay:{default:null},timezone:{default:null},prevAvailableDay:{default:null},nextAvailableDay:{default:null}},computed:{selectedDaySessionsLabel:function(){return this.createDatetime(this.selectedDay).format(t.dayShort)}},methods:{goToPrevDay:function(){this.$emit("update:selectedDay",this.prevAvailableDay)},goToNextDay:function(){this.$emit("update:selectedDay",this.nextAvailableDay)}}}};function m(){return{template:"#timezone-select-template",props:{value:{}},computed:{selectValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}}}var y=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return n.rules={start:function(e){var t=n.moment(e.start).unix();return e.duration=n.moment(e.end).unix()-t,e.startUnix=t,e},service:function(e){return e.service=parseInt(e.service),e},resource:function(e){return e.resource=parseInt(e.resource),e}},n.moment=i,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(l);function v(e){return{inject:{createDatetime:{from:"createDatetime",default:function(){return function(t,i){return e.tz(t,i||"UTC")}}},createLocalDatetime:{default:function(){var t=this;return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return i||(i=e()),t.createDatetime(i,t.timezone)}}},createSameLocalDatetime:{default:function(){var t=this;return function(i){var n=e.parseZone(i);return e.tz(n.format("YYYY-MM-DD HH:ii:ss"),"YYYY-MM-DD HH:ii:ss",t.timezone)}}},createDateString:{default:function(){return function(t){return e(t).format("YYYY-MM-DD")}}}}}}var b={inject:["humanizeDuration"],watch:{"filter.duration":function(e,t){if(e&&t){var i=this.filters.slice(this.filters.indexOf("duration")+1),n=Array.isArray(i),r=0;for(i=n?i:i[Symbol.iterator]();;){var s;if(n){if(r>=i.length)break;s=i[r++]}else{if((r=i.next()).done)break;s=r.value}var o=s;this.filter[o]=Object.keys(this[o+"FilterValues"])[0]}}}},computed:{selectedSessionDuration:function(){var e=this;if(!this.filter.duration)return!1;var t=this.service.sessionTypes.find(function(t){return e._getSessionTypeId(t)===e.filter.duration});return!!t&&t.data.duration},durationFilterValues:function(){var e=this;if(!this.service)return[];return this.service.sessionTypes.filter(function(t){return e.filterAgainstPreviousFilters("duration",t)}).reduce(function(t,i){return t[e._getSessionTypeId(i)]=function(t){var i=e.humanizeDuration(1e3*t.data.duration,{units:["w","d","h","m"],round:!0});return t.label?t.label+" ("+i+")":i}(i),t},{})},durationExposedValue:function(){var e=this;return!!this.filter.duration&&this.service.sessionTypes.find(function(t){return e._getSessionTypeId(t)===e.filter.duration})}},methods:{_getSessionTypeId:function(e){return e.label+String(e.data.duration)},durationFilterPassed:function(e){return e.duration===this.selectedSessionDuration},durationFilterCorrespondsToSession:function(e,t){var i=this,n=this.service.sessionTypes.find(function(t){return i._getSessionTypeId(t)===e});return!!n&&(n.data.duration===t.duration&&this._matchesSessionResources(n,t))},_matchesSessionResources:function(e,t){return e.data.resources.map(function(e){return e.id}).reduce(function(e,i){return e&&t.resources.indexOf(i)>-1},!0)},durationInSessionType:function(e,t){var i=this,n=this.service.sessionTypes.find(function(t){return i._getSessionTypeId(t)===e});return!!n&&this._getSessionTypeId(t)===this._getSessionTypeId(n)}}},g={watch:{"filter.staffMember":function(e,t){if(e&&t){var i=this.filters.slice(this.filters.indexOf("staffMember")+1),n=Array.isArray(i),r=0;for(i=n?i:i[Symbol.iterator]();;){var s;if(n){if(r>=i.length)break;s=i[r++]}else{if((r=i.next()).done)break;s=r.value}var o=s;this.filter[o]=Object.keys(this[o+"FilterValues"])[0]}}}},computed:{staffMemberFilterValues:function(){var e=this;if(!this.service)return[];var t=[],i=this.service.sessionTypes.filter(function(t){return e.filterAgainstPreviousFilters("staffMember",t)}),n=Array.isArray(i),r=0;for(i=n?i:i[Symbol.iterator]();;){var s;if(n){if(r>=i.length)break;s=i[r++]}else{if((r=i.next()).done)break;s=r.value}var o=function(){if(u){if(l>=a.length)return"break";c=a[l++]}else{if((l=a.next()).done)return"break";c=l.value}var e=c;t.find(function(t){return t.id===e.id})||t.push(e)},a=(s.data.resources||[]).filter(function(e){return"staff"===e.type}),u=Array.isArray(a),l=0;for(a=u?a:a[Symbol.iterator]();;){var c;if("break"===o())break}}return t.reduce(function(e,t){return e[t.id]=t.name,e},{})},staffMemberExposedValue:function(){var e=this;if(!this.filter.staffMember)return!1;var t=this.service.sessionTypes,i=Array.isArray(t),n=0;for(t=i?t:t[Symbol.iterator]();;){var r;if(i){if(n>=t.length)break;r=t[n++]}else{if((n=t.next()).done)break;r=n.value}var s=r.data.resources.find(function(t){return Number(t.id)===Number(e.filter.staffMember)});if(s)return s}return!1}},methods:{staffMemberFilterPassed:function(e){return e.resources.indexOf(this.filter.staffMember)>-1},staffMemberFilterCorrespondsToSession:function(e,t){return t.resources.indexOf(e)>-1},staffMemberInSessionType:function(e,t){return e=Number(e),!!t.data.resources.find(function(t){return Number(t.id)===e&&"staff"===t.type})}}};function S(){return{mixins:[b,g],data:function(){return{filter:{duration:null,staffMember:null}}},props:{filters:{default:function(){return["duration","staffMember"]}}},watch:{service:{immediate:!0,handler:function(){var e=this,t=JSON.parse(JSON.stringify(this.filter)),i=function(t){return e.filters.reduce(function(e,i){return e&&!t[i]},!0)};this.$nextTick(function(){var n=JSON.parse(JSON.stringify(e.filter));if(!i(t)||i(n)){var r=e.filters,s=Array.isArray(r),o=0;for(r=s?r:r[Symbol.iterator]();;){var a;if(s){if(o>=r.length)break;a=r[o++]}else{if((o=r.next()).done)break;a=o.value}var u=a;e[u+"FilterValues"]&&(e.filter[u]=Object.keys(e[u+"FilterValues"])[0])}}})}},filter:{deep:!0,handler:function(){var e=this;this.isMounted&&(this.session=null,this.$nextTick(function(){var t=e.selectedDay;e.selectedDay=null,e.hasSessionsOnSelectedDay()&&e.$nextTick(function(){e.selectedDay=t})}),this.emitExposedValues())}}},computed:{filteredSessions:function(){var e=this;return this.sessions.filter(function(t){return Object.keys(e.filter).reduce(function(i,n){return i&&(!e.filter[n]||e[n+"FilterPassed"](t))},!0)})}},methods:{emitExposedValues:function(){var e={},t=this.filters,i=Array.isArray(t),n=0;for(t=i?t:t[Symbol.iterator]();;){var r;if(i){if(n>=t.length)break;r=t[n++]}else{if((n=t.next()).done)break;r=n.value}var s=r;e[s]=this[s+"ExposedValue"]}this.$emit("exposed",e)},hasSessionsOnSelectedDay:function(){return!!this.selectedDaySessions.length},getFilterValues:function(e){return this[e+"FilterValues"]},hasFilterValues:function(e){return!!Object.keys(this[e+"FilterValues"]).length},filterAgainstPreviousFilters:function(e,t){var i=this.filters.indexOf(e),n=this.filters.slice(0,i),r=Array.isArray(n),s=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(s>=n.length)break;o=n[s++]}else{if((s=n.next()).done)break;o=s.value}var a=o;if(!!!Object.keys(this[a+"FilterValues"]).length)return!0;if(!(!this[a+"InSessionType"]||this[a+"InSessionType"](this.filter[a],t)))return!1}return!0},selectFilters:function(e){var t=this,i=function(){if(r){if(s>=n.length)return"break";o=n[s++]}else{if((s=n.next()).done)return"break";o=s.value}var i=o;if(!t[i+"FilterValues"]||!Object.keys(t[i+"FilterValues"]).length)return"continue";t.filter[i]=Object.keys(t[i+"FilterValues"]).find(function(n){return t[i+"FilterCorrespondsToSession"](n,e)})};var n=this.filters,r=Array.isArray(n),s=0;e:for(n=r?n:n[Symbol.iterator]();;){var o;switch(i()){case"break":break e;case"continue":continue}}}}}}i.d(t,"SessionApi",function(){return c}),i.d(t,"RangeCache",function(){return n}),i.d(t,"SessionReadTransformer",function(){return y}),i.d(t,"CfServiceSessionSelector",function(){return f}),i.d(t,"CfSessionTimePicker",function(){return h}),i.d(t,"CfSessionDatePicker",function(){return d}),i.d(t,"CfDateNavigator",function(){return p}),i.d(t,"CfTimezoneSelect",function(){return m}),i.d(t,"MfCreateDatetimeCapable",function(){return v}),i.d(t,"MfSessionsFilterCapable",function(){return S})}])});